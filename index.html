<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Algorithm Activity ‚Äî Click & Drop</title>
  <style>
    /* Happy, modern classroom theme */
    *{box-sizing:border-box}
    :root{
      --bg:#fff9fb;
      --card:#ffffff;
      --ink:#1f2937;
      --muted:#6b7280;
      --violet:#8b5cf6;
      --pink:#f472b6;
      --green:#10b981;
      --amber:#f59e0b;
      --ring:0 10px 30px rgba(139,92,246,.15);
      --ring2:0 10px 30px rgba(244,114,182,.15);
    }
    html,body{height:100%}
    body{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      margin:0; padding:0; color:var(--ink);
      background:
        radial-gradient(1200px 400px at -10% -10%, #ffe4f0 0, transparent 50%),
        radial-gradient(900px 400px at 110% -10%, #e9e0ff 0, transparent 50%),
        var(--bg);
    }
    header,footer{
      background: linear-gradient(90deg, #fef6ff, #fff7fb);
      border-bottom:1px solid #f1e8ff; padding:18px 24px;
    }
    footer{border-top:1px solid #f1e8ff; border-bottom:none; color:var(--muted)}
    h1{
      margin:6px 0 4px; font-weight:900; letter-spacing:.2px;
      background: linear-gradient(90deg, var(--violet), var(--pink));
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    h2{margin:4px 0 8px; font-weight:800}
    main{
      display:grid; grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
      gap:16px; padding:16px; align-items:start;
    }
    .panel{
      background:var(--card); border:1px solid #f1e8ff; border-radius:16px;
      padding:16px; box-shadow:var(--ring);
    }

    /* Scenario tabs */
    .tabs{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px}
    .tab{
      background:#fff; border:1px solid #e7defc; padding:8px 12px; border-radius:999px;
      font-weight:800; cursor:pointer; box-shadow:var(--ring);
    }
    .tab.active{
      background:linear-gradient(180deg,#a78bfa,#8b5cf6);
      color:#fff; border-color:#8b5cf6;
      box-shadow:0 10px 30px rgba(139,92,246,.35);
    }

    /* Ingredient list */
    .list{display:flex;flex-wrap:wrap;gap:10px;min-height:56px}
    .item{
      background:#f4f0ff; border:1px dashed #c9b8ff; border-radius:999px;
      padding:10px 14px; cursor:pointer; font-weight:800; display:flex; align-items:center; gap:10px;
      box-shadow:var(--ring); transition:.15s transform ease,.15s background ease;
    }
    .item:hover{transform:translateY(-2px); background:#efe7ff}
    .emoji{
      width:28px;height:28px;border-radius:50%;display:grid;place-items:center;font-size:18px;
      background:#ffffff;border:1px solid #e9ddff; box-shadow:var(--ring2);
    }

    /* Stack (bottom -> top) */
    .stack{
      min-height:240px; border:2px dashed #e5d8ff; border-radius:16px; padding:14px;
      display:flex; flex-direction:column; gap:10px; justify-content:flex-end;
      background:linear-gradient(180deg,#fff,#fff7ff); position:relative;
      animation:softPulse 3s ease-in-out infinite;
    }
    @keyframes softPulse{
      0%,100%{ box-shadow:0 0 0 0 rgba(139,92,246,.10) }
      50%{ box-shadow:0 0 0 8px rgba(139,92,246,.03) }
    }
    .hint{color:#9aa0aa; text-align:center; margin:36px 0}
    .layer{
      background:#fffdf5; border:1px solid #ffe4a3; border-radius:14px; padding:10px 12px;
      display:flex; align-items:center; justify-content:space-between; gap:10px; font-weight:800;
      box-shadow:0 8px 20px rgba(245,158,11,.10);
    }
    .controls{display:flex; gap:6px}
    .btn{
      border:1px solid #e7defc; background:#fff; border-radius:10px; padding:6px 8px; cursor:pointer;
      font-weight:800; box-shadow:var(--ring); min-width:34px; text-align:center;
    }
    .btn:hover{filter:brightness(.98)}
    .btn.up{background:#eef2ff}
    .btn.down{background:#eefbf4}
    .btn.del{background:#fff7ed}

    .actions{margin-top:10px; display:flex; gap:10px; flex-wrap:wrap}
    button{
      border:1px solid #e7defc; background:linear-gradient(180deg,#f5f1ff,#efe8ff);
      border-radius:12px; padding:10px 14px; font-weight:900; cursor:pointer; box-shadow:var(--ring);
    }
    button.primary{
      background:linear-gradient(180deg,#a78bfa,#8b5cf6); color:#fff; border-color:#8b5cf6;
      box-shadow:0 10px 30px rgba(139,92,246,.35);
    }
    button.success{
      background:linear-gradient(180deg,#34d399,#10b981); color:#fff; border-color:#10b981;
      box-shadow:0 10px 30px rgba(16,185,129,.35);
    }

    label{display:block;margin:6px 0 4px}
    textarea{
      width:100%; min-height:110px; padding:10px; border-radius:12px; border:1px solid #e7defc; background:#fff;
      box-shadow:0 4px 12px rgba(139,92,246,.06);
    }
    .copy-row{margin:6px 0}
    #result{
      display:grid; place-items:center; min-height:120px;
      background:#fff; border:1px dashed #f5d0fe; border-radius:16px; padding:8px;
    }

    /* Toast */
    .toast{
      position:fixed; inset-inline:0; bottom:20px; margin-inline:auto; width:max-content;
      background:#111827; color:#fff; padding:10px 14px; border-radius:999px;
      box-shadow:0 10px 30px rgba(0,0,0,.25); font-weight:800; opacity:0; transform:translateY(10px);
      transition:.25s; z-index:9999
    }
    .toast.show{opacity:1; transform:translateY(0)}
    .badge{background:#fff0f6;border:1px solid #ffd6e7;color:#d6336c;padding:2px 8px;border-radius:999px;font-weight:800;font-size:12px}
  </style>
</head>
<body>
  <header>
    <h1>Algorithm Activity ‚Äî Click & Drop</h1>
    <p>Click items to add them to the stack (bottom ‚Üí top). Reorder with ‚Üë/‚Üì, remove with ‚úñ. Then generate your prompt!</p>
  </header>

  <main>
    <!-- Left: Scenarios + items -->
    <section class="panel">
      <h2>Choose a Scenario</h2>
      <div class="tabs">
        <button class="tab active" data-scenario="sandwich">ü•™ Sandwich</button>
        <button class="tab" data-scenario="lulu-pasta">üçù Lulu Pasta</button>
        <button class="tab" data-scenario="morning">üåû Morning Routine</button>
        <button class="tab" data-scenario="atm">üèß ATM</button>
      </div>

      <h2>Click to Add</h2>
      <div id="items" class="list" aria-label="Items list"></div>

      <div class="actions">
        <button id="reset">Reset</button>
      </div>
    </section>

    <!-- Middle: Stack bottom->top -->
    <section class="panel">
      <h2>Stack (Bottom ‚Üë Top)</h2>
      <div id="stack" class="stack" aria-label="Stack zone">
        <p class="hint">Click items to add them here</p>
      </div>
      <div class="actions">
        <button id="generate" class="primary">Generate Prompt</button>
        <button id="clearStack">Clear</button>
      </div>
    </section>

    <!-- Right: Output -->
    <section class="panel">
      <h2>Prompt</h2>
      <label>English (copy & use with your image model)</label>
      <textarea id="promptEn" readonly></textarea>
      <div class="copy-row">
        <button id="copyEn">Copy EN</button>
      </div>

      <h2>Result (Optional use)</h2>
      <div id="result">
        <span class="badge">Tip</span>&nbsp;Paste the prompt into your favorite image generator.
      </div>
    </section>
  </main>

  <footer>
    <p>¬© Classroom demo. Designed for click-and-drop algorithm practice.</p>
  </footer>

  <div class="toast" aria-live="polite"></div>

  <script>
    // --- Scenario data (emoji + English labels) ---
    const scenarios = {
      "sandwich": [
        { en:"bottom bun", emoji:"üçû" },
        { en:"lettuce", emoji:"ü•¨" },
        { en:"beef patty", emoji:"üçñ" },
        { en:"cheese slice", emoji:"üßÄ" },
        { en:"tomato", emoji:"üçÖ" },
        { en:"top bun", emoji:"üçû" }
      ],
      // Simple, classroom-friendly "Lulu Pasta" recipe
      "lulu-pasta": [
        { en:"pot with salted water", emoji:"üç≤" },
        { en:"add pasta", emoji:"üçù" },
        { en:"boil until al dente", emoji:"‚è±Ô∏è" },
        { en:"drain pasta", emoji:"üß∫" },
        { en:"pan with butter & garlic", emoji:"üßÑ" },
        { en:"pour cream", emoji:"ü•õ" },
        { en:"sprinkle parmesan", emoji:"üßÄ" },
        { en:"toss pasta with sauce", emoji:"üçΩÔ∏è" },
        { en:"serve in a bowl", emoji:"ü•£" }
      ],
      // Morning routine (bottom ‚Üí top = time order)
      "morning": [
        { en:"wake up", emoji:"‚è∞" },
        { en:"make the bed", emoji:"üõèÔ∏è" },
        { en:"brush teeth", emoji:"ü™•" },
        { en:"wash face", emoji:"üöø" },
        { en:"have breakfast", emoji:"üç≥" },
        { en:"pack backpack", emoji:"üéí" },
        { en:"go to school", emoji:"üè´" }
      ],
      // ATM steps
      "atm": [
        { en:"insert card", emoji:"üí≥" },
        { en:"select language", emoji:"üåê" },
        { en:"enter PIN", emoji:"üî¢" },
        { en:"choose withdrawal", emoji:"üèß" },
        { en:"enter amount", emoji:"üíµ" },
        { en:"collect cash", emoji:"üí∏" },
        { en:"take card & receipt", emoji:"üßæ" }
      ]
    };

    // --- Elements ---
    const tabs = document.querySelectorAll('.tab');
    const itemsList = document.getElementById('items');
    const stack = document.getElementById('stack');
    const promptEn = document.getElementById('promptEn');
    const copyEn = document.getElementById('copyEn');
    const resetBtn = document.getElementById('reset');
    const clearStackBtn = document.getElementById('clearStack');
    const generateBtn = document.getElementById('generate');
    const toast = document.querySelector('.toast');

    // --- Helpers ---
    function showToast(msg='Prompt created!'){
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), 1600);
    }

    function renderItems(scen){
      itemsList.innerHTML = '';
      scenarios[scen].forEach((it, idx) => {
        const btn = document.createElement('button');
        btn.className = 'item';
        btn.innerHTML = `<span class="emoji">${it.emoji}</span> ${it.en}`;
        btn.addEventListener('click', () => addToStack(it));
        itemsList.appendChild(btn);
      });
    }

    function ensureHint(){
      if(!stack.querySelector('.layer') && !stack.querySelector('.hint')){
        const p = document.createElement('p');
        p.className = 'hint';
        p.textContent = 'Click items to add them here';
        stack.appendChild(p);
      }
    }

    function addToStack(item){
      stack.querySelector('.hint')?.remove();
      const row = document.createElement('div');
      row.className = 'layer';
      row.dataset.en = item.en;
      row.innerHTML = `
        <div style="display:flex;align-items:center;gap:10px;font-weight:900">
          <span class="emoji">${item.emoji}</span> ${item.en}
        </div>
        <div class="controls">
          <button class="btn up" title="Move up">‚Üë</button>
          <button class="btn down" title="Move down">‚Üì</button>
          <button class="btn del" title="Remove">‚úñ</button>
        </div>
      `;
      // controls
      const [up, down, del] = row.querySelectorAll('.btn');
      up.addEventListener('click', () => moveLayer(row, -1));
      down.addEventListener('click', () => moveLayer(row, +1));
      del.addEventListener('click', () => { row.remove(); ensureHint(); });
      stack.appendChild(row);
    }

    function moveLayer(el, dir){
      if(dir < 0 && el.previousElementSibling){
        stack.insertBefore(el, el.previousElementSibling);
      } else if(dir > 0 && el.nextElementSibling){
        stack.insertBefore(el.nextElementSibling, el);
      }
    }

    function clearStack(){
      stack.innerHTML = '';
      ensureHint();
    }

    function buildPrompt(){
      const layers = [...stack.querySelectorAll('.layer')];
      if(!layers.length) return '';
      const parts = layers.map(l => l.dataset.en);
      const base = `Create a clean, classroom-friendly illustration of a process with clear, labeled-like layers (no actual text labels).`;
      const order = ` Show the layers from bottom to top in this exact order: ${parts.join(', ')}.`;
      const style = ` Use simple shapes, even spacing, soft lighting, and a neutral background. No hands, no utensils, no extra decorations. High resolution.`;
      return base + order + style;
    }

    // --- Events ---
    tabs.forEach(t => t.addEventListener('click', () => {
      tabs.forEach(x => x.classList.remove('active'));
      t.classList.add('active');
      clearStack();
      renderItems(t.dataset.scenario);
    }));

    resetBtn.addEventListener('click', () => {
      clearStack();
      const active = document.querySelector('.tab.active')?.dataset.scenario || 'sandwich';
      renderItems(active);
      promptEn.value = '';
    });

    clearStackBtn.addEventListener('click', clearStack);

    copyEn.addEventListener('click', () => {
      promptEn.select();
      document.execCommand('copy');
      showToast('Prompt copied!');
    });

    generateBtn.addEventListener('click', () => {
      const p = buildPrompt();
      promptEn.value = p;
      showToast('Prompt created!');
    });

    // --- Init ---
    (function init(){
      ensureHint();
      renderItems('sandwich');
    })();
  </script>
</body>
</html>
